<h1>Products</h1>
<%= form_tag(products_path, :method => "get",   
    class: 'navbar-form navbar-left') do %>
<div class="input-group">
    <%= search_field_tag :search, params[:search], placeholder: "Search", class: "form-control" %>
    <div class="input-group-btn">
        <%= button_tag "search", :class => 'btn btn-info glyphicon glyphicon-search',:name => nil%>
    </div>
</div>
<% end %>
<table class="table table-striped">
    <thead>
        <tr>
            <th scope="col">Title</th>
            <th scope="col">Description</th>
            <th scope="col">Price</th>
            <th scope="col">stock quantity</th>
            <th scope="col">image</th>

        </tr>
    </thead>

    <tbody>
        <% @products.each do |product| %>
        <tr>
            <td><%= product.title %></td>
            <td><%= product.description %></td>
            <td><%= product.price %></td>
            <td><%= product.in_stock_quantity %></td>
            <td> <%= image_tag(product.image,:size=>"100x50",:class =>"thumbnail")if product.image.attached?%></td>
            <td><%= link_to 'Show',product_path(product) %></td>
            <% #if can? :manage, Product%>
            <td><%= link_to 'Edit', edit_product_path(product) %></td>
            <td><%= link_to 'Destroy', product, method: :delete, data: { confirm: 'Are you sure?' } %></td>
            <% end %>
            <%= form_with(url: shopping_carts_path, method: "post") do |form| %>
                <td><%= form.number_field :quantity %></td>
                <td><%= form.hidden_field(:product_id, :value => product.id) %></td>
                <td><%= form.submit "add" %></td>
            <% end %>

        </tr>
        <% end %>
    </tbody>
</table>